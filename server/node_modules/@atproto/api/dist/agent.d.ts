import { AtpBaseClient, AtpServiceClient, ComAtprotoServerCreateAccount, ComAtprotoServerCreateSession, ComAtprotoServerGetSession } from './client';
import { AtpSessionData, AtpAgentLoginOpts, AtpAgentFetchHandler, AtpAgentGlobalOpts, AtpPersistSessionHandler, AtpAgentOpts, AtprotoServiceType } from './types';
export declare class AtpAgent {
    service: URL;
    api: AtpServiceClient;
    session?: AtpSessionData;
    labelersHeader: string[];
    proxyHeader: string | undefined;
    pdsUrl: URL | undefined;
    protected _baseClient: AtpBaseClient;
    protected _persistSession?: AtpPersistSessionHandler;
    protected _refreshSessionPromise: Promise<void> | undefined;
    get com(): import("./client").ComNS;
    static fetch: AtpAgentFetchHandler | undefined;
    static appLabelers: string[];
    static configure(opts: AtpAgentGlobalOpts): void;
    constructor(opts: AtpAgentOpts);
    clone(): AtpAgent;
    copyInto(inst: AtpAgent): void;
    withProxy(serviceType: AtprotoServiceType, did: string): AtpAgent;
    get hasSession(): boolean;
    setPersistSessionHandler(handler?: AtpPersistSessionHandler): void;
    configureLabelersHeader(labelerDids: string[]): void;
    configureProxyHeader(serviceType: AtprotoServiceType, did: string): void;
    createAccount(opts: ComAtprotoServerCreateAccount.InputSchema): Promise<ComAtprotoServerCreateAccount.Response>;
    login(opts: AtpAgentLoginOpts): Promise<ComAtprotoServerCreateSession.Response>;
    resumeSession(session: AtpSessionData): Promise<ComAtprotoServerGetSession.Response>;
    private _addHeaders;
    private _fetch;
    refreshSession(): Promise<void>;
    private _refreshSessionInner;
    uploadBlob: typeof this.api.com.atproto.repo.uploadBlob;
    resolveHandle: typeof this.api.com.atproto.identity.resolveHandle;
    updateHandle: typeof this.api.com.atproto.identity.updateHandle;
    createModerationReport: typeof this.api.com.atproto.moderation.createReport;
    private _updateApiEndpoint;
}
